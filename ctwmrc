# Jack Davidson's ctwm(1) config

NoDefaults
NoGrabServer
RestartPreviousState
UsePPosition "on"
Randomplacement "on"
AutoRelativeResize
AutoFocusToTransients
WarpRing
WindowRing
SaveWorkspaceFocus

LeftTitleButton  ":menu"  = f.menu "winops"
RightTitleButton ":xlogo" = f.delete

Color
{
    BorderColor "slategrey"
    DefaultBackground "rgb:2/a/9"
    DefaultForeground "gray85"
    TitleBackground "rgb:2/a/9"
    TitleForeground "gray85"
    MenuBackground "rgb:2/a/9"
    MenuForeground "gray85"
    MenuBorderColor "slategrey"
    MenuTitleBackground "gray70"
    MenuTitleForeground "rgb:2/a/9"
    IconBackground "rgb:2/a/9"
    IconForeground "gray85"
    IconBorderColor "gray85"
    IconManagerBackground "rgb:2/a/9"
    IconManagerForeground "gray85"
    MapWindowCurrentWorkSpace { "slategray" "#FFFACD" }
}

WindowGeometries {
    "xclock" "240x40-0-0"
}

WindowRingExclude {
	"xclock"
}

#ShowIconManager
IconManagerGeometry "360x60-0-0" 2
IconManagerDontShow {
	"xclock"
}

ShowWorkSpaceManager
WorkSpaceManagerGeometry "384x54+0-0" 4
WorkSpaces {
 "1"	{"#20A090" "white" "#AA80A0" "white" "cross_weave"}
 "2"	{"#20A090" "white" "#AA80A0" "white" "cross_weave"}
 "3"	{"#20A090" "white" "#AA80A0" "white" "cross_weave"}
 "4"	{"#20A090" "white" "#AA80A0" "white" "cross_weave"}
}

#
# Window Rules
#

NoShowOccupyAll
OccupyAll {
    # Desktop Widgets
    "XClock"
}

NoTitle {
    # Desktop Widgets
    "TWM Icon Manager"
    "WorkSpaceManager"
    "xclock"
}

#AlwaysOnTop {
#    # Desktop Widgets
#    "TWM Icon Manager"
#    "WorkSpaceManager"
#    "xclock"
#}

# Motion Based Functions
MoveDelta 3
Function "move-or-lower" { f.move f.deltastop f.lower }
Function "move-or-raise" { f.move f.deltastop f.raise }

#
# WM bindings - vi-like
#

# workspace selection on {ASDF} keys for workspaces {1234}
"a"      = mod4  : all : f.gotoworkspace "1"
"s"      = mod4  : all : f.gotoworkspace "2"
"d"      = mod4  : all : f.gotoworkspace "3"
"f"      = mod4  : all : f.gotoworkspace "4"

# go to prev/next workspace
"comma"  = mod4  : all : f.prevworkspace
"period" = mod4  : all : f.nextworkspace

# move window to prev/next workspace
"comma"  = mod4|s : all : f.movetoprevworkspaceandfollow
"period" = mod4|s : all : f.movetonextworkspaceandfollow


# bring up root menu
"bracketleft"     = mod4  : all : f.menu "defops"

# toggle fullscreen
"space" = mod4|s  : all : f.fullscreenzoom

# Alt-Tab
"tab"   = m    : window : f.warpring "next"

# vi Alt-Tab
"j"     = mod4 : window : f.warpring "next"
"k"     = mod4 : window : f.warpring "prev"

# Moves window in a direction until it hits another window or the screen border.
"h"     = mod4    : all : f.pack "left"
"l"     = mod4    : all : f.pack "right"

"h"     = mod4|s  : all : f.fill "left"
"j"     = mod4|s  : all : f.fill "bottom"
"k"     = mod4|s  : all : f.fill "top"
"l"     = mod4|s  : all : f.fill "right"

# close window
"c"     = mod4|s  : window : f.destroy

"m"     = mod4    : window : f.iconify

# Spawn programs
"Return" = mod4|s : all  : !"xterm &"
"p"     = mod4 : all : !"rofi -show run &"

# Kill twm
"q"     = mod4|s  : window : f.quit

# Mouse Controls
Button3 = : root : f.menu "defops" # right-click on root window pops up the root menu

# hold mod4 and right-click drag to resize a window
Button3 = mod4 : window : f.resize

# mod4 + drag to move or lower the current window
Button1 = mod4 : window|icon|title : f.function "move-or-lower"

# mod4 + middle click to iconify window
Button2 = mod4 : window|icon|title : f.iconify

# raise window by clicking its title
Button1 = : title : f.function "move-or-raise"

# middle click title to toggle raise/lower
Button2 = : title : f.raiselower

# drag/toggle iconify with mouse
Function "move-or-iconify" { f.move f.deltastop f.iconify }
Button1 = : icon : f.function "move-or-iconify"

# icon manager
Button1 = : iconmgr : f.iconify
Button2 = : iconmgr : f.iconify

StayUpMenus
IgnoreCaseInMenuSelection

# generated by xdg_menu --format twm ...
sinclude(HOME/.config/twm-xdg.menu)

#
# Menus
#

# root menu
menu "defops"
{
	"CTwm"          f.title
	"Run..."        !"exec rofi -show run &"
	""              f.nop
	"Web Navigator" !"exec chromium &"
	"Xterm"         !"exec xterm &"
	""              f.nop
	"Applications"  f.menu "Applications" # for use with xdg-menu
	"Preferences"   f.menu "preferences"
	""              f.nop
	"Restart"       f.restart
	"Log Out"       f.quit
}

# Little Menu that pops out of title bar
menu "winops"
{
	"Maximize"   f.fullzoom
	"Fullscreen" f.fullscreenzoom
	"Iconify"    f.iconify
}

menu "preferences"
{
	"Preferences" f.title
	"Monitors"    !"exec arandr &"
}
